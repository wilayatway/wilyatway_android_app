import 'package:flutter/material.dart';

class KashfMuraqabaScreen extends StatefulWidget {
  const KashfMuraqabaScreen({super.key});

  @override
  _KashfMuraqabaScreenState createState() => _KashfMuraqabaScreenState();
}

class _KashfMuraqabaScreenState extends State<KashfMuraqabaScreen> {
  String selectedLang = 'english';

  void showFullImage(String imageUrl) {
    showDialog(
      context: context,
      builder:
          (context) => Dialog(
            backgroundColor: Colors.transparent,
            child: GestureDetector(
              onTap: () => Navigator.pop(context),
              child: InteractiveViewer(child: Image.network(imageUrl)),
            ),
          ),
    );
  }

  Widget buildImageGrid(List<String> urls) {
    return Padding(
      padding: const EdgeInsets.symmetric(vertical: 8.0),
      child: GridView.builder(
        shrinkWrap: true,
        physics: const NeverScrollableScrollPhysics(),
        itemCount: urls.length,
        gridDelegate: const SliverGridDelegateWithFixedCrossAxisCount(
          crossAxisCount: 4,
          crossAxisSpacing: 4,
          mainAxisSpacing: 4,
          childAspectRatio: 1,
        ),
        itemBuilder: (context, index) {
          final url = urls[index];
          return GestureDetector(
            onTap: () => showFullImage(url),
            child: ClipRRect(
              borderRadius: BorderRadius.circular(6),
              child: Image.network(url, fit: BoxFit.cover),
            ),
          );
        },
      ),
    );
  }

  Widget getContentWidget() {
    switch (selectedLang) {
      case 'urdu':
        return urduContent();
      case 'roman':
        return romanContent();
      case 'english':
      default:
        return englishContent();
    }
  }

  @override
  Widget build(BuildContext context) {
    return Stack(
      children: [
        Image.asset(
          'assets/images/bg2.png',
          fit: BoxFit.cover,
          width: double.infinity,
          height: double.infinity,
        ),
        Scaffold(
          backgroundColor: const Color.fromARGB(0, 255, 255, 255),
          appBar: AppBar(
            title: const Text('Kashf o Muraqaba'),
            backgroundColor: Colors.teal.withOpacity(0.2),
          ),
          body: Column(
            children: [
              Container(
                color: Colors.white.withOpacity(0.5),
                padding: const EdgeInsets.symmetric(vertical: 10),
                child: Row(
                  mainAxisAlignment: MainAxisAlignment.spaceEvenly,
                  children: [
                    langTab("urdu", "ÿßÿ±ÿØŸà"),
                    langTab("english", "English"),
                    langTab("roman", "Roman"),
                  ],
                ),
              ),
              Expanded(
                child: SingleChildScrollView(
                  padding: const EdgeInsets.all(12.0),
                  child: Container(
                    decoration: BoxDecoration(
                      color: Colors.white.withOpacity(0.7),
                      borderRadius: BorderRadius.circular(16),
                      border: Border.all(color: Colors.white30),
                    ),
                    padding: const EdgeInsets.all(16),
                    child: getContentWidget(),
                  ),
                ),
              ),
            ],
          ),
        ),
      ],
    );
  }

  Widget langTab(String langKey, String label) {
    final isSelected = selectedLang == langKey;
    return GestureDetector(
      onTap: () {
        setState(() {
          selectedLang = langKey;
        });
      },
      child: Column(
        mainAxisSize: MainAxisSize.min,
        children: [
          Text(
            label,
            style: TextStyle(
              fontSize: 16,
              color: isSelected ? Colors.white : Colors.white70,
              fontWeight: isSelected ? FontWeight.bold : FontWeight.normal,
              decoration:
                  isSelected ? TextDecoration.overline : TextDecoration.none,
            ),
          ),
        ],
      ),
    );
  }

  Widget englishContent() {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        text("üìø MurƒÅqaba Guide (Spiritual Meditation Practice)"),
        text("\nüõÅ Preparation"),
        text("- Wudu (Ablution): Stay in a state of purity."),
        text("- Tahajjud or Nafil: At least 2 rakats; ideally, 12 rakats."),
        text("- Durood/Salawat: Recite any salawat at least 11 times."),
        text(
          "- Remember Mursid: Recite Ya Khawja MOhammed Shah Makki Al Madad / Your Murshid Name at least 7 times.",
        ),

        text("\nüß† Spiritual Intention (Niyyah)"),
        text("- Sit for the pleasure of Allah Ô∑ª."),
        text("- Seek nearness to Allah through your Sheikh."),

        text("\nüßé‚Äç‚ôÇÔ∏è Sitting Posture"),
        buildImageGrid([
          "https://i.ibb.co/r2trYk9D/muraqaba-sitting-2.jpg",
          "https://i.ibb.co/3536PdGd/muraqaba-post.png",
          "https://i.ibb.co/wrJ1qhqN/download-1.jpg",
          "https://i.ibb.co/j9WPc14B/jihad-akbar-earthquake-inner-battle-750x422.jpg",
        ]),
        text("- Sit in calm, ideally facing Qiblah."),
        text("- Cross-legged or in tashahhud."),
        text("- Hands on thighs/knees."),

        text("\nüåü Tasavvur-e-Sheikh"),
        buildImageGrid([
          "https://i.ibb.co/3wLg7kB/murshid-h2h.jpg",
          "https://i.ibb.co/b5V9LZfp/murshid-heartenlight.jpg",
          "https://i.ibb.co/zTvjLf8H/download.jpg",
        ]),
        text("- Visualize your Sheikh sitting in front."),
        text("- Light (Noor) flows from Sheikh‚Äôs chest to yours."),
        text("- Light from his forehead to yours."),

        text("\n‚ú® Breathing Technique:"),
        text("- Inhale: 'ALLAH' ‚Äì Light rising to head."),
        text("- Exhale: 'HU' ‚Äì Light descending into heart."),

        text("\nüö™ Entering MurƒÅqaba:"),
        text("- Let go of thoughts."),
        text("- Focus: Breath, Sheikh, silence."),

        text("\nüåÄ Realms Journey:"),
        buildImageGrid([
          "https://i.ibb.co/X1Bq9sC/roohparwaz.jpg",
          "https://i.ibb.co/0VG3HzLt/spiritual.jpg",
        ]),

        text("- Aalam-e-Lahoot: Unity with Divine."),
        text("- Aalam-e-Mithal: Imagery, visions."),
        buildImageGrid(["https://i.ibb.co/YF8stzwG/universe.jpg"]),
        text("- Aalam-e-Malakut: Angels, light."),
        text("- Aalam-e-Jabarut: Divine powers."),
        text("- Aalam-e-Lahoot: Unity with Divine."),

        text("\nüïú Duration: Start 10‚Äì15 mins; increase to 30‚Äì60."),

        text("\nüìù Afterward:"),
        text("- Slowly Open your eyes."),
        text("- Reflect, write down experiences."),

        text("\nüå∫ Close Session:"),
        text("- Durood again."),
        text("- Say: 'YA Khawaja Muhammad Shah Makki Madad' (7 times)."),
        text("- Make heartfelt du‚Äòa to Allah Ô∑ª."),
      ],
    );
  }

  Widget romanContent() {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        text("üìø Muraqaba Guide (Roohani Riyazat)"),
        text("\nüõÅ Tayari"),
        text("- Wuzu mein rehna zaroori hai."),
        text("- Tahajjud ya kam az kam 2 nafil (behtar 12 rakats)."),
        text("- Durood Shareef kam az kam 11 martaba."),
        text(
          "- Murshid ka tasavvur: 'Ya Khawja Muhammad Shah Makki Al Madad' ya apne Murshid ka naam 7 martaba.",
        ),

        text("\nüß† Niyyat"),
        text("- Allah ki raza ke liye baithna."),
        text("- Murshid ke zariye Allah ka qurb hasil karna."),

        text("\nüßé‚Äç‚ôÇÔ∏è Baithne ka Tareeqa"),
        buildImageGrid([
          "https://i.ibb.co/r2trYk9D/muraqaba-sitting-2.jpg",
          "https://i.ibb.co/3536PdGd/muraqaba-post.png",
          "https://i.ibb.co/wrJ1qhqN/download-1.jpg",
          "https://i.ibb.co/j9WPc14B/jihad-akbar-earthquake-inner-battle-750x422.jpg",
        ]),
        text("- Sukoon se Qibla rukh ho kar baithain."),
        text("- Tashahhud ya murgha tariqa."),
        text("- Haath raanon par rakhain."),

        text("\nüåü Tasavvur-e-Sheikh"),
        buildImageGrid([
          "https://i.ibb.co/3wLg7kB/murshid-h2h.jpg",
          "https://i.ibb.co/b5V9LZfp/murshid-heartenlight.jpg",
          "https://i.ibb.co/zTvjLf8H/download.jpg",
        ]),
        text("- Apne Sheikh ko samne tasavvur karain."),
        text("- Noor Sheikh ke seene se aap ke seene mein aata hai."),
        text("- Noor Sheikh ke mathe se aap ke mathe mein aata hai."),

        text("\n‚ú® Saans ka Tareeqa"),
        text("- Saans lete waqt: 'ALLAH' ‚Äì noor sir tak."),
        text("- Saans chorte waqt: 'HU' ‚Äì noor dil mein."),

        text("\nüö™ Muraqaba mein Dakhal"),
        text("- Fikr se nijaat."),
        text("- Bas saans, Sheikh aur khamoshi par tawajju."),

        text("\nüåÄ Aalam ka Safar"),
        buildImageGrid([
          "https://i.ibb.co/X1Bq9sC/roohparwaz.jpg",
          "https://i.ibb.co/0VG3HzLt/spiritual.jpg",
        ]),
        text("- Aalam-e-Lahoot: Allah se wusool."),
        text("- Aalam-e-Mithal: Tasaveer aur manazir."),
        buildImageGrid(["https://i.ibb.co/YF8stzwG/universe.jpg"]),
        text("- Aalam-e-Malakut: Farishte aur noor."),
        text("- Aalam-e-Jabarut: Rabbani quwatein."),

        text("\nüïú Waqt"),
        text(
          "- 10-15 minute se shuru karain; badhakar 30‚Äì60 minute tak le jayein.",
        ),

        text("\nüìù Baad mein"),
        text("- Aankhain ahista kholain."),
        text("- Jo kuch mehsoos kiya likh lain."),

        text("\nüå∫ Khatma"),
        text("- Phir se durood Shareef."),
        text("- 7 martaba: 'YA Khawaja Muhammad Shah Makki Madad'."),
        text("- Allah se dil se dua karain."),
      ],
    );
  }

  Widget urduContent() {
    return Column(
      crossAxisAlignment: CrossAxisAlignment.start,
      children: [
        text("üìø ŸÖÿ±ÿßŸÇÿ®€Å ⁄Øÿßÿ¶€å⁄à (ÿ±Ÿàÿ≠ÿßŸÜ€å ÿ±€åÿßÿ∂ÿ™)"),
        text("\nüõÅ ÿ™€åÿßÿ±€å"),
        text("- Ÿàÿ∂Ÿà ŸÖ€å⁄∫ ÿ±€ÅŸÜÿß ÿ∂ÿ±Ÿàÿ±€å €Å€í€î"),
        text("- ÿ™€Åÿ¨ÿØ €åÿß ⁄©ŸÖ ÿßÿ≤ ⁄©ŸÖ €≤ ŸÜŸÅŸÑ (ÿ®€Åÿ™ÿ± €±€≤ ÿ±⁄©ÿπÿ™€å⁄∫)"),
        text("- ÿØÿ±ŸàÿØ ÿ¥ÿ±€åŸÅ ⁄©ŸÖ ÿßÿ≤ ⁄©ŸÖ €±€± ŸÖÿ±ÿ™ÿ®€Å€î"),
        text(
          "- ŸÖÿ±ÿ¥ÿØ ⁄©ÿß ÿ™ÿµŸàÿ±: '€åÿß ÿÆŸàÿßÿ¨€Å ŸÖÿ≠ŸÖÿØ ÿ¥ÿß€Å ŸÖ⁄©€å ŸÖÿØÿØ' €åÿß ÿßŸæŸÜ€í ŸÖÿ±ÿ¥ÿØ ⁄©ÿß ŸÜÿßŸÖ €∑ ŸÖÿ±ÿ™ÿ®€Å€î",
        ),

        text("\nüß† ŸÜ€åÿ™"),
        text("- ÿßŸÑŸÑ€Å ⁄©€å ÿ±ÿ∂ÿß ⁄©€í ŸÑ€å€í ÿ®€åŸπ⁄æŸÜÿß€î"),
        text("- ŸÖÿ±ÿ¥ÿØ ⁄©€í ÿ∞ÿ±€åÿπ€í ÿßŸÑŸÑ€Å ⁄©ÿß ŸÇÿ±ÿ® ÿ≠ÿßÿµŸÑ ⁄©ÿ±ŸÜÿß€î"),

        text("\nüßé‚Äç‚ôÇÔ∏è ÿ®€åŸπ⁄æŸÜ€í ⁄©ÿß ÿ∑ÿ±€åŸÇ€Å"),
        buildImageGrid([
          "https://i.ibb.co/r2trYk9D/muraqaba-sitting-2.jpg",
          "https://i.ibb.co/3536PdGd/muraqaba-post.png",
          "https://i.ibb.co/wrJ1qhqN/download-1.jpg",
          "https://i.ibb.co/j9WPc14B/jihad-akbar-earthquake-inner-battle-750x422.jpg",
        ]),
        text("- ÿ≥⁄©ŸàŸÜ ÿ≥€íÿå ŸÇÿ®ŸÑ€Å ÿ±ÿÆ ÿ®€åŸπ⁄æ€å⁄∫€î"),
        text("- ÿ™ÿ¥€ÅÿØ €åÿß ŸÖÿ±ÿ∫€Å ÿ∑ÿ±ÿ≤ Ÿæÿ±€î"),
        text("- €Åÿßÿ™⁄æ ÿ±ÿßŸÜŸà⁄∫ Ÿæÿ± ÿ±⁄©⁄æ€å⁄∫€î"),

        text("\nüåü ÿ™ÿµŸàÿ±Ÿê ÿ¥€åÿÆ"),
        buildImageGrid([
          "https://i.ibb.co/3wLg7kB/murshid-h2h.jpg",
          "https://i.ibb.co/b5V9LZfp/murshid-heartenlight.jpg",
          "https://i.ibb.co/zTvjLf8H/download.jpg",
        ]),
        text("- ÿßŸæŸÜ€í ÿ¥€åÿÆ ⁄©Ÿà ÿ≥ÿßŸÖŸÜ€í ÿ™ÿµŸàÿ± ⁄©ÿ±€å⁄∫€î"),
        text("- ŸÜŸàÿ± ÿ¥€åÿÆ ⁄©€í ÿ≥€åŸÜ€í ÿ≥€í ÿ¢Ÿæ ⁄©€í ÿ≥€åŸÜ€í ŸÖ€å⁄∫ ÿ¢ÿ™ÿß €Å€í€î"),
        text("- ŸÜŸàÿ± ÿ¥€åÿÆ ⁄©€í ŸÖÿßÿ™⁄æ€í ÿ≥€í ÿ¢Ÿæ ⁄©€í ŸÖÿßÿ™⁄æ€í ŸÖ€å⁄∫€î"),

        text("\n‚ú® ÿ≥ÿßŸÜÿ≥ ⁄©€å ŸÖÿ¥ŸÇ"),
        text("- ÿ≥ÿßŸÜÿ≥ ŸÑ€åÿ™€í ŸàŸÇÿ™: 'ÿßŸÑŸÑ€Å' ‚Äì ŸÜŸàÿ± ÿ≥ÿ± ÿ™⁄©€î"),
        text("- ÿ≥ÿßŸÜÿ≥ ⁄Ü⁄æŸà⁄ëÿ™€í ŸàŸÇÿ™: '€ÅŸèŸà' ‚Äì ŸÜŸàÿ± ÿØŸÑ ŸÖ€å⁄∫€î"),

        text("\nüö™ ŸÖÿ±ÿßŸÇÿ®€Å ŸÖ€å⁄∫ ÿØÿßÿÆŸÑ€Å"),
        text("- ÿÆ€åÿßŸÑÿßÿ™ ÿ≥€í ŸÜÿ¨ÿßÿ™€î"),
        text("- ÿ™Ÿàÿ¨€Å: ÿ≥ÿßŸÜÿ≥ÿå ÿ¥€åÿÆÿå ÿÆÿßŸÖŸàÿ¥€å€î"),

        text("\nüåÄ ÿπŸàÿßŸÑŸÖ ⁄©ÿß ÿ≥ŸÅÿ±"),
        buildImageGrid([
          "https://i.ibb.co/X1Bq9sC/roohparwaz.jpg",
          "https://i.ibb.co/0VG3HzLt/spiritual.jpg",
        ]),
        text("- ÿπÿßŸÑŸÖŸê ŸÑÿß€ÅŸàÿ™: ÿßŸÑŸÑ€Å ÿ≥€í ŸàÿµÿßŸÑ€î"),
        text("- ÿπÿßŸÑŸÖŸê ŸÖÿ´ÿßŸÑ: ÿ™ÿµŸà€åÿ±€å⁄∫ÿå ŸÖŸÜÿßÿ∏ÿ±€î"),
        buildImageGrid(["https://i.ibb.co/YF8stzwG/universe.jpg"]),
        text("- ÿπÿßŸÑŸÖŸê ŸÖŸÑ⁄©Ÿàÿ™: ŸÅÿ±ÿ¥ÿ™€íÿå ŸÜŸàÿ±ÿßŸÜ€å ŸÖÿÆŸÑŸàŸÇ€î"),
        text("- ÿπÿßŸÑŸÖŸê ÿ¨ÿ®ÿ±Ÿàÿ™: ÿ±ÿ®ÿßŸÜ€å ÿ∑ÿßŸÇÿ™€å⁄∫€î"),

        text("\nüïú ŸÖÿØÿ™"),
        text("- ÿßÿ®ÿ™ÿØÿß ŸÖ€å⁄∫ 10-15 ŸÖŸÜŸπÿõ Ÿæ⁄æÿ± ÿ®⁄ë⁄æÿß ⁄©ÿ± 30‚Äì60 ŸÖŸÜŸπ€î"),

        text("\nüìù ÿ®ÿπÿØ ÿßÿ≤ÿß⁄∫"),
        text("- ÿ¢€Åÿ≥ÿ™€Å ÿ≥€í ÿ¢ŸÜ⁄©⁄æ€å⁄∫ ⁄©⁄æŸàŸÑ€å⁄∫€î"),
        text("- ŸÖÿ¥ÿß€ÅÿØÿßÿ™ ⁄©Ÿà ÿ™ÿ≠ÿ±€åÿ± ⁄©ÿ±€å⁄∫€î"),

        text("\nüå∫ ÿßÿÆÿ™ÿ™ÿßŸÖ"),
        text("- ÿØÿ±ŸàÿØ Ÿæÿß⁄© ÿØŸàÿ®ÿßÿ±€Å Ÿæ⁄ë⁄æ€å⁄∫€î"),
        text("- €∑ ÿ®ÿßÿ±: '€åÿß ÿÆŸàÿßÿ¨€Å ŸÖÿ≠ŸÖÿØ ÿ¥ÿß€Å ŸÖ⁄©€å ŸÖÿØÿØ'€î"),
        text("- ÿØŸÑ ÿ≥€í ÿØÿπÿß ⁄©ÿ±€å⁄∫€î"),
      ],
    );
  }

  Widget text(String data) => Padding(
    padding: const EdgeInsets.only(bottom: 6.0),
    child: Text(
      data,
      style: const TextStyle(color: Colors.black87, fontSize: 16, height: 1.5),
      textAlign: TextAlign.justify,
    ),
  );
}
